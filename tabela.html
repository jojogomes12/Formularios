<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerador de Preços — Orla Scooter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { background: #f9fafb; }
    .card { transition: transform 0.2s; }
    .card:hover { transform: scale(1.02); }
  </style>
</head>
<body class="p-6">

  <h1 class="text-3xl font-bold text-center text-orange-600 mb-6">Orla Scooter — Gerador de Preços</h1>

  <!-- Formulário -->
  <div class="max-w-2xl mx-auto bg-white p-6 rounded-2xl shadow-md mb-8">
    <h2 class="text-lg font-semibold mb-4 text-gray-700">Adicionar Produto</h2>
    <div class="flex flex-col gap-3">
      <input id="nome" type="text" placeholder="Nome do produto" class="border p-2 rounded-md">
      <input id="preco" type="number" placeholder="Preço base (R$)" class="border p-2 rounded-md">
      <button onclick="adicionarProduto()" class="bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-md font-semibold">Adicionar</button>
    </div>
  </div>

  <!-- Lista de produtos -->
  <div id="listaProdutos" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

  <!-- Botão PDF -->
  <div class="text-center mt-10">
    <button onclick="gerarPDF()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-md font-semibold">
      Gerar PDF
    </button>
  </div>

  <script>
    const produtos = [];
    const lista = document.getElementById("listaProdutos");

    function adicionarProduto() {
      const nome = document.getElementById("nome").value.trim();
      const preco = parseFloat(document.getElementById("preco").value);

      if (!nome || isNaN(preco) || preco <= 0) {
        alert("Preencha corretamente o nome e o valor do produto.");
        return;
      }

      const desconto = preco * 0.95;
      const parcelas = [];
      for (let i = 2; i <= 12; i++) {
        parcelas.push({ qtd: i, valor: preco / i });
      }

      const produto = { nome, preco, desconto, parcelas };
      produtos.push(produto);
      renderizarProdutos();

      document.getElementById("nome").value = "";
      document.getElementById("preco").value = "";
    }

    function renderizarProdutos() {
      lista.innerHTML = "";
      produtos.forEach((p, index) => {
        const card = document.createElement("div");
        card.className = "card bg-white p-5 rounded-2xl shadow-md border-l-4 border-orange-500";

        let parcelasHTML = "";
        p.parcelas.forEach(parc => {
          parcelasHTML += `<li>${parc.qtd}x de R$ ${parc.valor.toFixed(2).replace('.', ',')}</li>`;
        });

        card.innerHTML = `
          <h2 class="text-xl font-bold text-orange-700 mb-2">${p.nome}</h2>
          <p class="text-gray-700"><strong>Preço base:</strong> R$ ${p.preco.toFixed(2).replace('.', ',')}</p>
          <p class="text-gray-700"><strong>À vista (5% off):</strong> R$ ${p.desconto.toFixed(2).replace('.', ',')}</p>
          <ul class="mt-2 text-gray-800 list-disc list-inside">${parcelasHTML}</ul>
          <button onclick="removerProduto(${index})" class="mt-3 text-sm text-red-600 hover:underline">Remover</button>
        `;

        lista.appendChild(card);
      });
    }

    function removerProduto(i) {
      produtos.splice(i, 1);
      renderizarProdutos();
    }

    async function gerarPDF() {
      if (produtos.length === 0) {
        alert("Adicione pelo menos um produto antes de gerar o PDF.");
        return;
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      let y = 20;
      doc.setFontSize(18);
      doc.setTextColor(255, 102, 0);
      doc.text("Orla Scooter — Tabela de Preços", 15, y);
      y += 10;

      doc.setFontSize(12);
      doc.setTextColor(0, 0, 0);

      produtos.forEach((p, idx) => {
        if (y > 270) { // nova página
          doc.addPage();
          y = 20;
        }
        doc.setFont(undefined, "bold");
        doc.text(`${p.nome}`, 15, y);
        y += 6;

        doc.setFont(undefined, "normal");
        doc.text(`Preço base: R$ ${p.preco.toFixed(2).replace('.', ',')}`, 15, y);
        y += 6;
        doc.text(`À vista (5% off): R$ ${p.desconto.toFixed(2).replace('.', ',')}`, 15, y);
        y += 6;

        p.parcelas.forEach(parc => {
          doc.text(`${parc.qtd}x de R$ ${parc.valor.toFixed(2).replace('.', ',')}`, 25, y);
          y += 5;
        });

        y += 4;
      });

      doc.save("Tabela_Orla_Scooter.pdf");
    }
  </script>

</body>
</html>
