<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Termo de Retirada — ORLA SCOOTER</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print {
      .no-print { display: none; }
      body { background: white; }
      .page-break { page-break-after: always; }
    }
  </style>
</head>
<body class="bg-gray-50 p-4">
  <div class="max-w-4xl mx-auto bg-white shadow-md p-8 mb-6">
    <!-- Logo -->
    <div class="flex justify-center mb-10">
      <img src="https://raw.githubusercontent.com/jojogomes12/Formulario/main/logo.jpg" 
           alt="Logo Orla Scooter" 
           class="h-24 w-auto">
    </div>

    <!-- Título -->
    <h1 class="text-center text-3xl font-bold text-gray-800 mb-2">ORLA SCOOTER</h1>
    <p class="text-center text-gray-600 text-sm mb-8">
      Termo de Uso e Responsabilidade — Retirada de Produto em Loja
    </p>

    <!-- Formulário -->
    <form id="termoForm" class="space-y-6">
      <!-- Introdução -->
      <div class="text-sm leading-relaxed text-gray-700">
        <p>
          Eu, <input type="text" id="nome" class="border-b border-gray-400 px-2 py-1 w-80 focus:outline-none focus:border-orange-500" placeholder="Nome completo">,
        </p>
        <p class="mt-2">
          portador(a) do CPF nº <input type="text" id="cpf" class="border-b border-gray-400 px-2 py-1 w-48 focus:outline-none focus:border-orange-500" placeholder="000.000.000-00">, declaro que na presente data retirei em loja física da <strong>ORLA SCOOTERS ELÉTRICAS</strong> o(s) produto(s) descrito(s) abaixo, de chassi <input type="text" id="chassiDeclaracao" class="border-b border-gray-400 px-2 py-1 w-64 focus:outline-none focus:border-orange-500" placeholder="Digite o chassi">, motor <input type="text" id="motorDeclaracao" class="border-b border-gray-400 px-2 py-1 w-64 focus:outline-none focus:border-orange-500" placeholder="Digite o motor"> e bateria <input type="text" id="bateriaDeclaracao" class="border-b border-gray-400 px-2 py-1 w-64 focus:outline-none focus:border-orange-500" placeholder="Digite o número da bateria">, em perfeito estado de funcionamento e conservação, conforme conferência realizada no ato da retirada.
        </p>
      </div>

      <!-- Veículo -->
      <div class="mt-6">
        <label class="text-sm font-semibold text-gray-700">Veículo:</label>
        <input type="text" id="veiculo" class="border-b border-gray-400 px-2 py-1 w-full mt-1 focus:outline-none focus:border-orange-500" placeholder="Ex: Triciclo Big">
      </div>



      <!-- Produtos Retirados -->
      <div class="mt-6">
        <label class="text-sm font-semibold text-gray-700 block mb-3">Produto(s) Retirado(s):</label>
        <div class="grid grid-cols-2 gap-x-8 gap-y-2 text-sm">
          <label class="flex items-center"><input type="checkbox" name="produto" value="Veículo" class="mr-2 w-4 h-4"> Veículo</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Bateria" class="mr-2 w-4 h-4"> Bateria</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Carregador" class="mr-2 w-4 h-4"> Carregador</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Chave de ignição" class="mr-2 w-4 h-4"> Chave de ignição</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Par de retrovisores" class="mr-2 w-4 h-4"> Par de retrovisores</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Controle" class="mr-2 w-4 h-4"> Controle</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Cartão NFC" class="mr-2 w-4 h-4"> Cartão NFC</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Chaves extras" class="mr-2 w-4 h-4"> Chaves extras</label>
        </div>
      </div>

      <!-- Nota Fiscal e Data -->
      <div class="grid grid-cols-2 gap-6 mt-6">
        <div>
          <label class="text-sm font-semibold text-gray-700 block mb-1">Nota Fiscal nº:</label>
          <input type="text" id="notaFiscal" class="border-b border-gray-400 px-2 py-1 w-full focus:outline-none focus:border-orange-500">
        </div>
        <div>
          <label class="text-sm font-semibold text-gray-700 block mb-1">Data da Retirada:</label>
          <input type="date" id="dataRetirada" class="border-b border-gray-400 px-2 py-1 w-full focus:outline-none focus:border-orange-500">
        </div>
      </div>

      <!-- Declarações -->
      <div class="mt-8">
        <h3 class="text-sm font-semibold text-gray-700 mb-3">Declaro ainda:</h3>
        <ol class="list-decimal ml-5 space-y-2 text-sm text-gray-700 leading-relaxed">
          <li>Que recebi o(s) item(s) acima mencionado(s) sem avarias aparentes, com todos os acessórios e em perfeito estado, conforme verificado no momento da entrega.</li>
          <li>Que assumo total responsabilidade pelo transporte, armazenamento, manuseio e conservação do(s) produto(s) a partir do momento da retirada.</li>
          <li>Que estou ciente de que a ORLA SCOOTERS ELÉTRICAS não se responsabiliza por danos causados ao produto após sua retirada do estabelecimento.</li>
          <li>Que tive acesso às informações sobre garantia legal e/ou contratual aplicável, bem como instruções de uso do produto.</li>
        </ol>
      </div>

      <!-- Observações -->
      <div class="mt-8">
        <h3 class="text-sm font-semibold text-gray-700 mb-3">Observações:</h3>
        <textarea id="observacoes" rows="4" class="w-full border border-gray-300 rounded p-2 text-sm focus:outline-none focus:border-orange-500"></textarea>
      </div>

      <!-- Assinaturas -->
      <div class="grid grid-cols-2 gap-12 mt-12 mb-8">
        <div>
          <div class="border-b border-gray-400 h-16 mb-2"></div>
          <p class="text-center text-sm font-semibold text-gray-700">Assinatura do Cliente:</p>
        </div>
        <div>
          <div class="border-b border-gray-400 h-16 mb-2"></div>
          <p class="text-center text-sm font-semibold text-gray-700">Assinatura do Responsável:</p>
        </div>
      </div>

      <!-- Botão -->
      <div class="flex justify-center pt-6 no-print">
        <button type="button" onclick="gerarPDF()" class="bg-orange-500 text-white px-8 py-3 rounded-lg hover:bg-orange-600 transition font-semibold shadow-md">
          Gerar PDF (2 vias)
        </button>
      </div>
    </form>

    <p class="text-center text-xs text-gray-400 mt-8">Gerado por Orla Scooter — Termo de Retirada</p>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    async function gerarPDF() {
      const { jsPDF } = window.jspdf;
      
      // Coletar dados do formulário
      const nome = document.getElementById('nome').value || '_____________________________';
      const cpf = document.getElementById('cpf').value || '_____________________';
      const veiculo = document.getElementById('veiculo').value || '_____________________________';
      const chassiDeclaracao = document.getElementById('chassiDeclaracao').value || '_____________________________';
      const motorDeclaracao = document.getElementById('motorDeclaracao').value || '_____________________________';
      const bateriaDeclaracao = document.getElementById('bateriaDeclaracao').value || '_____________________________';
      const notaFiscal = document.getElementById('notaFiscal').value || '________';
      const dataRetirada = document.getElementById('dataRetirada').value || '__/__/____';
      const observacoes = document.getElementById('observacoes').value;
      
      // Pegar produtos selecionados
      const checkboxes = document.querySelectorAll('input[name="produto"]:checked');
      const produtos = Array.from(checkboxes).map(cb => cb.value).join(', ') || '____________________';
      
      // Formatar data
      let dataFormatada = dataRetirada;
      if (dataRetirada && dataRetirada.includes('-')) {
        const [ano, mes, dia] = dataRetirada.split('-');
        dataFormatada = `${dia}/${mes}/${ano}`;
      }
      
      const doc = new jsPDF();
      const marginLeft = 20;
      const marginRight = 190;
      let y = 20;
      
      // Carregar logo
      const logoUrl = 'https://raw.githubusercontent.com/jojogomes12/Formulario/main/logo.jpg';
      let logoImg = null;
      
      try {
        const response = await fetch(logoUrl);
        const blob = await response.blob();
        logoImg = await new Promise((resolve) => {
          const reader = new FileReader();
          reader.onloadend = () => resolve(reader.result);
          reader.readAsDataURL(blob);
        });
      } catch (error) {
        console.error('Erro ao carregar logo:', error);
      }
      
      // Função para adicionar uma via
      function adicionarVia(titulo) {
        y = 20;
        
        // Logo
        if (logoImg) {
          doc.addImage(logoImg, 'JPEG', 85, y, 40, 20);
          y += 30;
        }
        
        // Título
        doc.setFontSize(16);
        doc.setFont('helvetica', 'bold');
        doc.text('ORLA SCOOTER', 105, y, { align: 'center' });
        y += 10;
        
        doc.setFontSize(10);
        doc.setFont('helvetica', 'normal');
        doc.text('Termo de Uso e Responsabilidade — Retirada de Produto em Loja', 105, y, { align: 'center' });
        y += 15;
        
        // Título da via
        doc.setFontSize(11);
        doc.setFont('helvetica', 'bold');
        doc.text(titulo, 105, y, { align: 'center' });
        y += 10;
        
        // Texto introdutório
        doc.setFontSize(10);
        doc.setFont('helvetica', 'normal');
        const intro = `Eu, ${nome}, portador(a) do CPF nº ${cpf}, declaro que na presente data retirei em loja física da ORLA SCOOTERS ELÉTRICAS o(s) produto(s) descrito(s) abaixo, de chassi ${chassiDeclaracao}, motor ${motorDeclaracao} e bateria ${bateriaDeclaracao}, em perfeito estado de funcionamento e conservação, conforme conferência realizada no ato da retirada.`;
        const linhasIntro = doc.splitTextToSize(intro, marginRight - marginLeft);
        doc.text(linhasIntro, marginLeft, y);
        y += linhasIntro.length * 5 + 8;
        
        // Veículo
        doc.setFont('helvetica', 'bold');
        doc.text('Veículo:', marginLeft, y);
        doc.setFont('helvetica', 'normal');
        doc.text(veiculo, marginLeft + 20, y);
        y += 10;
        
        // Produtos
        doc.setFont('helvetica', 'bold');
        doc.text('Produto(s) Retirado(s):', marginLeft, y);
        y += 5;
        doc.setFont('helvetica', 'normal');
        const linhasProdutos = doc.splitTextToSize(produtos, marginRight - marginLeft);
        doc.text(linhasProdutos, marginLeft, y);
        y += linhasProdutos.length * 5 + 8;
        
        // Nota Fiscal e Data
        doc.setFont('helvetica', 'bold');
        doc.text('Nota Fiscal nº:', marginLeft, y);
        doc.setFont('helvetica', 'normal');
        doc.text(notaFiscal, marginLeft + 30, y);
        
        doc.setFont('helvetica', 'bold');
        doc.text('Data da Retirada:', marginLeft + 80, y);
        doc.setFont('helvetica', 'normal');
        doc.text(dataFormatada, marginLeft + 115, y);
        y += 12;
        
        // Declarações
        doc.setFont('helvetica', 'bold');
        doc.text('Declaro ainda:', marginLeft, y);
        y += 6;
        
        doc.setFont('helvetica', 'normal');
        const declaracoes = [
          '1. Que recebi o(s) item(s) acima mencionado(s) sem avarias aparentes, com todos os acessórios e em perfeito estado, conforme verificado no momento da entrega.',
          '2. Que assumo total responsabilidade pelo transporte, armazenamento, manuseio e conservação do(s) produto(s) a partir do momento da retirada.',
          '3. Que estou ciente de que a ORLA SCOOTERS ELÉTRICAS não se responsabiliza por danos causados ao produto após sua retirada do estabelecimento.',
          '4. Que tive acesso às informações sobre garantia legal e/ou contratual aplicável, bem como instruções de uso do produto.'
        ];
        
        declaracoes.forEach(dec => {
          const linhasDec = doc.splitTextToSize(dec, marginRight - marginLeft - 5);
          doc.text(linhasDec, marginLeft, y);
          y += linhasDec.length * 5 + 3;
        });
        
        y += 5;
        
        // Observações
        if (observacoes) {
          doc.setFont('helvetica', 'bold');
          doc.text('Observações:', marginLeft, y);
          y += 5;
          doc.setFont('helvetica', 'normal');
          const linhasObs = doc.splitTextToSize(observacoes, marginRight - marginLeft);
          doc.text(linhasObs, marginLeft, y);
          y += linhasObs.length * 5 + 8;
        } else {
          y += 8;
        }
        
        // Assinaturas
        y += 20;
        doc.line(marginLeft, y, marginLeft + 60, y);
        doc.line(marginLeft + 90, y, marginLeft + 150, y);
        y += 7;
        doc.setFont('helvetica', 'bold');
        doc.text('Assinatura do Cliente:', marginLeft, y);
        doc.text('Assinatura do Responsável:', marginLeft + 90, y);
        y += 10;
        
        // Rodapé
        doc.setFontSize(8);
        doc.setFont('helvetica', 'italic');
        doc.text('Gerado por Orla Scooter — Termo de Retirada', 105, y, { align: 'center' });
      }
      
      // Via do Cliente
      adicionarVia('CÓPIA DO CLIENTE');
      
      // Nova página para Via da Loja
      doc.addPage();
      adicionarVia('CÓPIA DA LOJA / RESPONSÁVEL');
      
      // Salvar PDF
      const nomeArquivo = `termo-retirada-${nome.replace(/\s+/g, '_')}.pdf`;
      doc.save(nomeArquivo);
    }
  </script>
</body>
</html>