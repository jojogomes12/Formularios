<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Termo de Devolução — ORLA SCOOTER</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print {
      .no-print { display: none; }
      body { background: white; }
      .page-break { page-break-after: always; }
    }
  </style>
</head>
<body class="bg-gray-50 p-4">
  <div class="max-w-4xl mx-auto bg-white shadow-md p-8 mb-6">
    <!-- Logo -->
    <div class="flex justify-center mb-10">
      <img src="https://raw.githubusercontent.com/jojogomes12/Formulario/main/logo.jpg" 
           alt="Logo Orla Scooter" 
           class="h-24 w-auto">
    </div>

    <!-- Título -->
    <h1 class="text-center text-3xl font-bold text-gray-800 mb-2">ORLA SCOOTER LTDA</h1>
    <p class="text-center text-gray-600 text-sm mb-8">
      Termo de Devolução de Produto
    </p>

    <!-- Formulário -->
    <form id="termoForm" class="space-y-6">
      <!-- Introdução -->
      <div class="text-sm leading-relaxed text-gray-700">
        <p>
          Eu, <input type="text" id="nome" class="border-b border-gray-400 px-2 py-1 w-80 focus:outline-none focus:border-orange-500" placeholder="Nome completo">,
        </p>
        <p class="mt-2">
          portador(a) do CPF nº <input type="text" id="cpf" class="border-b border-gray-400 px-2 py-1 w-48 focus:outline-none focus:border-orange-500" placeholder="000.000.000-00">, declaro que na presente data devolvi à loja física da <strong>ORLA SCOOTERS ELÉTRICAS</strong> o(s) produto(s) descrito(s) abaixo, de chassi <input type="text" id="chassiDeclaracao" class="border-b border-gray-400 px-2 py-1 w-64 focus:outline-none focus:border-orange-500" placeholder="Digite o chassi">, motor <input type="text" id="motorDeclaracao" class="border-b border-gray-400 px-2 py-1 w-64 focus:outline-none focus:border-orange-500" placeholder="Digite o motor"> e bateria <input type="text" id="bateriaDeclaracao" class="border-b border-gray-400 px-2 py-1 w-64 focus:outline-none focus:border-orange-500" placeholder="Digite o número da bateria">, conforme conferência realizada no ato da devolução.
        </p>
      </div>

      <!-- Veículo -->
      <div class="mt-6">
        <label class="text-sm font-semibold text-gray-700">Veículo:</label>
        <input type="text" id="veiculo" class="border-b border-gray-400 px-2 py-1 w-full mt-1 focus:outline-none focus:border-orange-500" placeholder="Ex: Triciclo Big">
      </div>

      <!-- Motivo da Devolução -->
      <div class="mt-6">
        <label class="text-sm font-semibold text-gray-700 block mb-3">Motivo da Devolução:</label>
        <div class="grid grid-cols-2 gap-x-8 gap-y-2 text-sm">
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Defeito técnico" class="mr-2 w-4 h-4"> Defeito técnico</label>
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Arrependimento (dentro do prazo legal)" class="mr-2 w-4 h-4"> Arrependimento (dentro do prazo legal)</label>
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Produto diferente do pedido" class="mr-2 w-4 h-4"> Produto diferente do pedido</label>
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Insatisfação com o produto" class="mr-2 w-4 h-4"> Insatisfação com o produto</label>
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Garantia" class="mr-2 w-4 h-4"> Garantia</label>
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Troca por outro modelo" class="mr-2 w-4 h-4"> Troca por outro modelo</label>
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Avaria no transporte" class="mr-2 w-4 h-4"> Avaria no transporte</label>
          <label class="flex items-center"><input type="checkbox" name="motivo" value="Outro" class="mr-2 w-4 h-4"> Outro</label>
        </div>
      </div>

      <!-- Produtos Devolvidos -->
      <div class="mt-6">
        <label class="text-sm font-semibold text-gray-700 block mb-3">Produto(s) Devolvido(s):</label>
        <div class="grid grid-cols-2 gap-x-8 gap-y-2 text-sm">
          <label class="flex items-center"><input type="checkbox" name="produto" value="Veículo" class="mr-2 w-4 h-4"> Veículo</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Bateria" class="mr-2 w-4 h-4"> Bateria</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Carregador" class="mr-2 w-4 h-4"> Carregador</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Chave de ignição" class="mr-2 w-4 h-4"> Chave de ignição</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Par de retrovisores" class="mr-2 w-4 h-4"> Par de retrovisores</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Controle" class="mr-2 w-4 h-4"> Controle</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Cartão NFC" class="mr-2 w-4 h-4"> Cartão NFC</label>
          <label class="flex items-center"><input type="checkbox" name="produto" value="Chaves extras" class="mr-2 w-4 h-4"> Chaves extras</label>
        </div>
      </div>

      <!-- Estado do Produto -->
      <div class="mt-6">
        <label class="text-sm font-semibold text-gray-700 block mb-3">Estado do(s) Produto(s):</label>
        <div class="flex gap-8 text-sm">
          <label class="flex items-center"><input type="radio" name="estado" value="Perfeito estado" class="mr-2"> Perfeito estado</label>
          <label class="flex items-center"><input type="radio" name="estado" value="Com avarias" class="mr-2"> Com avarias</label>
          <label class="flex items-center"><input type="radio" name="estado" value="Com defeito" class="mr-2"> Com defeito</label>
        </div>
      </div>

      <!-- Nota Fiscal e Datas -->
      <div class="grid grid-cols-2 gap-6 mt-6">
        <div>
          <label class="text-sm font-semibold text-gray-700 block mb-1">Nota Fiscal nº:</label>
          <input type="text" id="notaFiscal" class="border-b border-gray-400 px-2 py-1 w-full focus:outline-none focus:border-orange-500">
        </div>
        <div>
          <label class="text-sm font-semibold text-gray-700 block mb-1">Data da Compra:</label>
          <input type="date" id="dataCompra" class="border-b border-gray-400 px-2 py-1 w-full focus:outline-none focus:border-orange-500">
        </div>
      </div>

      <div class="grid grid-cols-2 gap-6">
        <div>
          <label class="text-sm font-semibold text-gray-700 block mb-1">Data da Devolução:</label>
          <input type="date" id="dataDevolucao" class="border-b border-gray-400 px-2 py-1 w-full focus:outline-none focus:border-orange-500">
        </div>
        <div>
          <label class="text-sm font-semibold text-gray-700 block mb-1">Protocolo de Atendimento:</label>
          <input type="text" id="protocolo" class="border-b border-gray-400 px-2 py-1 w-full focus:outline-none focus:border-orange-500">
        </div>
      </div>

      <!-- Declarações -->
      <div class="mt-8">
        <h3 class="text-sm font-semibold text-gray-700 mb-3">Declaro ainda:</h3>
        <ol class="list-decimal ml-5 space-y-2 text-sm text-gray-700 leading-relaxed">
          <li>Que estou devolvendo o(s) produto(s) acima mencionado(s) conforme conferido pelo responsável da ORLA SCOOTERS ELÉTRICAS no momento da devolução.</li>
          <li>Que estou ciente dos termos e condições de devolução aplicáveis, incluindo prazos e procedimentos para reembolso ou troca.</li>
          <li>Que todas as informações prestadas neste documento são verdadeiras e podem ser verificadas através da nota fiscal e documentação apresentada.</li>
          <li>Que autorizo a ORLA SCOOTERS ELÉTRICAS a realizar vistoria técnica completa no(s) produto(s) devolvido(s) para análise das condições de devolução.</li>
          <li>Que estou ciente que o prazo para processamento da devolução e eventual reembolso seguirá as normas estabelecidas pela empresa e legislação vigente.</li>
        </ol>
      </div>

      <!-- Descrição de Avarias -->
      <div class="mt-8">
        <h3 class="text-sm font-semibold text-gray-700 mb-3">Descrição de Avarias/Defeitos (se aplicável):</h3>
        <textarea id="descricaoAvarias" rows="3" class="w-full border border-gray-300 rounded p-2 text-sm focus:outline-none focus:border-orange-500" placeholder="Descreva detalhadamente qualquer avaria ou defeito identificado"></textarea>
      </div>

      <!-- Observações -->
      <div class="mt-6">
        <h3 class="text-sm font-semibold text-gray-700 mb-3">Observações Gerais:</h3>
        <textarea id="observacoes" rows="4" class="w-full border border-gray-300 rounded p-2 text-sm focus:outline-none focus:border-orange-500"></textarea>
      </div>

      <!-- Assinaturas -->
      <div class="grid grid-cols-2 gap-12 mt-12 mb-8">
        <div>
          <div class="border-b border-gray-400 h-16 mb-2"></div>
          <p class="text-center text-sm font-semibold text-gray-700">Assinatura do Cliente:</p>
        </div>
        <div>
          <div class="border-b border-gray-400 h-16 mb-2"></div>
          <p class="text-center text-sm font-semibold text-gray-700">Assinatura do Responsável:</p>
        </div>
      </div>

      <!-- Botão -->
      <div class="flex justify-center pt-6 no-print">
        <button type="button" onclick="gerarPDF()" class="bg-orange-500 text-white px-8 py-3 rounded-lg hover:bg-orange-600 transition font-semibold shadow-md">
          Gerar PDF (2 vias)
        </button>
      </div>
    </form>

    <p class="text-center text-xs text-gray-400 mt-8">Gerado por Orla Scooter — Termo de Devolução</p>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    async function gerarPDF() {
      const { jsPDF } = window.jspdf;
      
      // Coletar dados do formulário
      const nome = document.getElementById('nome').value || '_____________________________';
      const cpf = document.getElementById('cpf').value || '_____________________';
      const veiculo = document.getElementById('veiculo').value || '_____________________________';
      const chassiDeclaracao = document.getElementById('chassiDeclaracao').value || '_____________________________';
      const motorDeclaracao = document.getElementById('motorDeclaracao').value || '_____________________________';
      const bateriaDeclaracao = document.getElementById('bateriaDeclaracao').value || '_____________________________';
      const notaFiscal = document.getElementById('notaFiscal').value || '________';
      const dataCompra = document.getElementById('dataCompra').value || '__/__/____';
      const dataDevolucao = document.getElementById('dataDevolucao').value || '__/__/____';
      const protocolo = document.getElementById('protocolo').value || '________';
      const descricaoAvarias = document.getElementById('descricaoAvarias').value;
      const observacoes = document.getElementById('observacoes').value;
      
      // Pegar motivos selecionados
      const checkboxesMotivo = document.querySelectorAll('input[name="motivo"]:checked');
      const motivos = Array.from(checkboxesMotivo).map(cb => cb.value).join(', ') || '____________________';
      
      // Pegar produtos selecionados
      const checkboxesProduto = document.querySelectorAll('input[name="produto"]:checked');
      const produtos = Array.from(checkboxesProduto).map(cb => cb.value).join(', ') || '____________________';
      
      // Pegar estado do produto
      const radioEstado = document.querySelector('input[name="estado"]:checked');
      const estado = radioEstado ? radioEstado.value : '____________________';
      
      // Formatar datas
      let dataCompraFormatada = dataCompra;
      if (dataCompra && dataCompra.includes('-')) {
        const [ano, mes, dia] = dataCompra.split('-');
        dataCompraFormatada = `${dia}/${mes}/${ano}`;
      }
      
      let dataDevolucaoFormatada = dataDevolucao;
      if (dataDevolucao && dataDevolucao.includes('-')) {
        const [ano, mes, dia] = dataDevolucao.split('-');
        dataDevolucaoFormatada = `${dia}/${mes}/${ano}`;
      }
      
      const doc = new jsPDF();
      const marginLeft = 20;
      const marginRight = 190;
      let y = 20;
      
      // Carregar logo
      const logoUrl = 'https://raw.githubusercontent.com/jojogomes12/Formulario/main/logo.jpg';
      let logoImg = null;
      
      try {
        const response = await fetch(logoUrl);
        const blob = await response.blob();
        logoImg = await new Promise((resolve) => {
          const reader = new FileReader();
          reader.onloadend = () => resolve(reader.result);
          reader.readAsDataURL(blob);
        });
      } catch (error) {
        console.error('Erro ao carregar logo:', error);
      }
      
      // Função para adicionar uma via
      function adicionarVia(titulo) {
        y = 20;
        
        // Logo
        if (logoImg) {
          doc.addImage(logoImg, 'JPEG', 85, y, 40, 20);
          y += 30;
        }
        
        // Título
        doc.setFontSize(16);
        doc.setFont('helvetica', 'bold');
        doc.text('ORLA SCOOTER', 105, y, { align: 'center' });
        y += 10;
        
        doc.setFontSize(10);
        doc.setFont('helvetica', 'normal');
        doc.text('Termo de Devolução de Produto', 105, y, { align: 'center' });
        y += 15;
        
        // Título da via
        doc.setFontSize(11);
        doc.setFont('helvetica', 'bold');
        doc.text(titulo, 105, y, { align: 'center' });
        y += 10;
        
        // Texto introdutório
        doc.setFontSize(10);
        doc.setFont('helvetica', 'normal');
        const intro = `Eu, ${nome}, portador(a) do CPF nº ${cpf}, declaro que na presente data devolvi à loja física da ORLA SCOOTERS ELÉTRICAS o(s) produto(s) descrito(s) abaixo, de chassi ${chassiDeclaracao}, motor ${motorDeclaracao} e bateria ${bateriaDeclaracao}, conforme conferência realizada no ato da devolução.`;
        const linhasIntro = doc.splitTextToSize(intro, marginRight - marginLeft);
        doc.text(linhasIntro, marginLeft, y);
        y += linhasIntro.length * 5 + 8;
        
        // Veículo
        doc.setFont('helvetica', 'bold');
        doc.text('Veículo:', marginLeft, y);
        doc.setFont('helvetica', 'normal');
        doc.text(veiculo, marginLeft + 20, y);
        y += 10;
        
        // Motivo
        doc.setFont('helvetica', 'bold');
        doc.text('Motivo da Devolução:', marginLeft, y);
        y += 5;
        doc.setFont('helvetica', 'normal');
        const linhasMotivo = doc.splitTextToSize(motivos, marginRight - marginLeft);
        doc.text(linhasMotivo, marginLeft, y);
        y += linhasMotivo.length * 5 + 6;
        
        // Produtos
        doc.setFont('helvetica', 'bold');
        doc.text('Produto(s) Devolvido(s):', marginLeft, y);
        y += 5;
        doc.setFont('helvetica', 'normal');
        const linhasProdutos = doc.splitTextToSize(produtos, marginRight - marginLeft);
        doc.text(linhasProdutos, marginLeft, y);
        y += linhasProdutos.length * 5 + 6;
        
        // Estado
        doc.setFont('helvetica', 'bold');
        doc.text('Estado do(s) Produto(s):', marginLeft, y);
        doc.setFont('helvetica', 'normal');
        doc.text(estado, marginLeft + 50, y);
        y += 10;
        
        // Nota Fiscal e Datas
        doc.setFontSize(9);
        doc.setFont('helvetica', 'bold');
        doc.text('Nota Fiscal nº:', marginLeft, y);
        doc.setFont('helvetica', 'normal');
        doc.text(notaFiscal, marginLeft + 28, y);
        
        doc.setFont('helvetica', 'bold');
        doc.text('Data Compra:', marginLeft + 70, y);
        doc.setFont('helvetica', 'normal');
        doc.text(dataCompraFormatada, marginLeft + 100, y);
        y += 5;
        
        doc.setFont('helvetica', 'bold');
        doc.text('Data Devolução:', marginLeft, y);
        doc.setFont('helvetica', 'normal');
        doc.text(dataDevolucaoFormatada, marginLeft + 35, y);
        
        doc.setFont('helvetica', 'bold');
        doc.text('Protocolo:', marginLeft + 70, y);
        doc.setFont('helvetica', 'normal');
        doc.text(protocolo, marginLeft + 90, y);
        y += 10;
        
        // Declarações
        doc.setFontSize(10);
        doc.setFont('helvetica', 'bold');
        doc.text('Declaro ainda:', marginLeft, y);
        y += 6;
        
        doc.setFont('helvetica', 'normal');
        doc.setFontSize(9);
        const declaracoes = [
          '1. Que estou devolvendo o(s) produto(s) acima mencionado(s) conforme conferido pelo responsável da ORLA SCOOTER MOTO ELETRICA LTDA. no momento da devolução.',
          '2. Que estou ciente dos termos e condições de devolução aplicáveis, incluindo prazos e procedimentos para reembolso ou troca.',
          '3. Que todas as informações prestadas neste documento são verdadeiras e podem ser verificadas através da nota fiscal e documentação apresentada.',
          '4. Que autorizo a ORLA SCOOTERS ELÉTRICAS a realizar vistoria técnica completa no(s) produto(s) devolvido(s) para análise das condições de devolução.',
          '5. Que estou ciente que o prazo para processamento da devolução e eventual reembolso seguirá as normas estabelecidas pela empresa e legislação vigente.'
        ];
        
        declaracoes.forEach(dec => {
          const linhasDec = doc.splitTextToSize(dec, marginRight - marginLeft - 5);
          doc.text(linhasDec, marginLeft, y);
          y += linhasDec.length * 4 + 2;
        });
        
        y += 4;
        
        // Descrição de Avarias
        if (descricaoAvarias) {
          doc.setFontSize(10);
          doc.setFont('helvetica', 'bold');
          doc.text('Descrição de Avarias/Defeitos:', marginLeft, y);
          y += 5;
          doc.setFont('helvetica', 'normal');
          doc.setFontSize(9);
          const linhasAvarias = doc.splitTextToSize(descricaoAvarias, marginRight - marginLeft);
          doc.text(linhasAvarias, marginLeft, y);
          y += linhasAvarias.length * 4 + 4;
        }
        
        // Observações
        if (observacoes) {
          doc.setFontSize(10);
          doc.setFont('helvetica', 'bold');
          doc.text('Observações Gerais:', marginLeft, y);
          y += 5;
          doc.setFont('helvetica', 'normal');
          doc.setFontSize(9);
          const linhasObs = doc.splitTextToSize(observacoes, marginRight - marginLeft);
          doc.text(linhasObs, marginLeft, y);
          y += linhasObs.length * 4 + 6;
        } else {
          y += 6;
        }
        
        // Assinaturas
        y += 15;
        doc.line(marginLeft, y, marginLeft + 60, y);
        doc.line(marginLeft + 90, y, marginLeft + 150, y);
        y += 7;
        doc.setFontSize(10);
        doc.setFont('helvetica', 'bold');
        doc.text('Assinatura do Cliente:', marginLeft, y);
        doc.text('Assinatura do Responsável:', marginLeft + 90, y);
        y += 8;
        
        // Rodapé
        doc.setFontSize(8);
        doc.setFont('helvetica', 'italic');
        doc.text('Gerado por Orla Scooter — Termo de Devolução', 105, y, { align: 'center' });
      }
      
      // Via do Cliente
      adicionarVia('CÓPIA DO CLIENTE');
      
      // Nova página para Via da Loja
      doc.addPage();
      adicionarVia('CÓPIA DA LOJA / RESPONSÁVEL');
      
      // Salvar PDF
      const nomeArquivo = `termo-devolucao-${nome.replace(/\s+/g, '_')}.pdf`;
      doc.save(nomeArquivo);
    }
  </script>
</body>
</html>